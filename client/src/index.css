@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap');
@import "tailwindcss";

@theme {
  --color-bg: #0d0b0a;
  --color-surface: #171412;
  --color-surface-2: #211d1a;
  --color-border: #332e28;
  --color-text: #d4cfc4;
  --color-text-dim: #7a7468;
  --color-accent: #d4a030;
  --color-accent-dim: #a07820;
  --color-green: #5aad72;
  --color-red: #c4584a;
  --color-yellow: #e0b840;
  --color-blue: #5b8dc6;

  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
  --font-sans: system-ui, -apple-system, sans-serif;
}

/* ── Base styles (in Tailwind's base layer) ────────────── */

@layer base {
  body {
    font-family: var(--font-mono);
    background: var(--color-bg);
    color: var(--color-text);
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  #root {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
}

/* ── Pip color classes (data-driven, keep as CSS) ─────── */

.pip-cleric { background: #f0c040; }
.pip-warrior { background: #c79c6e; }
.pip-wizard, .pip-magician { background: #69ccf0; }
.pip-enchanter { background: #b490d0; }
.pip-necromancer, .pip-shadow-knight { background: #a330c9; }
.pip-rogue { background: #fff569; }
.pip-ranger { background: #abd473; }
.pip-druid { background: #ff7d0a; }
.pip-monk { background: #00ff96; }
.pip-bard { background: #e6005c; }
.pip-paladin { background: #f58cba; }
.pip-shaman { background: #0070de; }
.pip-warlock { background: #9482c9; }

/* ── Treemap (custom CSS: color-mix, absolute positioning) */

.treemap-cell {
  position: absolute;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 8px 10px;
  background: color-mix(in srgb, var(--cell-color) 18%, var(--color-surface));
  border: 1px solid var(--color-bg);
  font-family: var(--font-mono);
  cursor: pointer;
  overflow: hidden;
  transition: opacity 0.2s, filter 0.2s;
}

.treemap-cell:hover {
  background: color-mix(in srgb, var(--cell-color) 32%, var(--color-surface));
}

.treemap-cell.active {
  background: color-mix(in srgb, var(--cell-color) 38%, var(--color-surface));
  box-shadow: inset 0 0 40px color-mix(in srgb, var(--cell-color) 12%, transparent);
  z-index: 1;
  border-color: var(--cell-color);
}

.treemap-cell.dimmed {
  opacity: 0.2;
  filter: grayscale(0.6);
}
.treemap-cell.dimmed:hover {
  opacity: 0.5;
  filter: grayscale(0.3);
}

.treemap-label {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: color-mix(in srgb, var(--cell-color) 80%, white);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1;
}

.treemap-count {
  font-size: 28px;
  font-weight: 700;
  color: var(--cell-color);
  line-height: 1;
  margin-top: 2px;
}

.treemap-meta {
  font-size: 9px;
  color: var(--color-text-dim);
  line-height: 1;
  margin-top: 3px;
}

.treemap-scanlines {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.06) 2px,
    rgba(0, 0, 0, 0.06) 4px
  );
  pointer-events: none;
  z-index: 2;
}

/* ── Readout status segments (data-driven colors) ─────── */

.readout-seg { transition: flex 0.3s; }
.readout-seg.status-main { background: var(--color-accent); }
.readout-seg.status-alt { background: var(--color-green); }
.readout-seg.status-bot { background: var(--color-yellow); }
.readout-seg.status-probationary { background: var(--color-text-dim); }

.readout-dot.status-main { background: var(--color-accent); }
.readout-dot.status-alt { background: var(--color-green); }
.readout-dot.status-bot { background: var(--color-yellow); }
.readout-dot.status-probationary { background: var(--color-text-dim); }

/* ── Keyframes ────────────────────────────────────────── */

@keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

/* ── Pseudo-elements that can't be Tailwind utilities ── */

.message-command::before {
  content: '> ';
  color: var(--color-accent);
}

.loading::after {
  content: ' ';
  animation: pulse 1s ease-in-out infinite;
}

/* ── Mobile overrides for treemap ─────────────────────── */

@media (max-width: 700px) {
  .treemap-count { font-size: 20px; }
  .treemap-label { font-size: 8px; }
}
